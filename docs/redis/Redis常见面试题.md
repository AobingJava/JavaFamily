> ä½ çŸ¥é“çš„è¶Šå¤šï¼Œä½ ä¸çŸ¥é“çš„è¶Šå¤š

> ç‚¹èµå†çœ‹ï¼Œå…»æˆä¹ æƒ¯

> [**GitHub**](https://github.com/AobingJava/JavaFamily)ä¸Šå·²ç»å¼€æº[https://github.com/Java...](https://github.com/AobingJava/JavaFamily)ï¼Œæœ‰é¢è¯•ç‚¹æ€ç»´å¯¼å›¾ï¼Œæ¬¢è¿[**Star**](https://github.com/AobingJava/JavaFamily)å’Œ[**å®Œå–„**](https://github.com/AobingJava/JavaFamily)

## å‰è¨€

**Redis**åœ¨äº’è”ç½‘æŠ€æœ¯å­˜å‚¨æ–¹é¢ä½¿ç”¨å¦‚æ­¤å¹¿æ³›ï¼Œå‡ ä¹æ‰€æœ‰çš„åç«¯æŠ€æœ¯é¢è¯•å®˜éƒ½è¦åœ¨**Redis**çš„ä½¿ç”¨å’ŒåŸç†æ–¹é¢å¯¹å°ä¼™ä¼´ä»¬è¿›è¡Œ360Â°çš„åˆéš¾ã€‚

ä½œä¸ºä¸€ä¸ªåœ¨äº’è”ç½‘å…¬å¸é¢ä¸€æ¬¡æ‹¿ä¸€æ¬¡Offerçš„é¢éœ¸ï¼Œæ‰“è´¥äº†æ— æ•°ç«äº‰å¯¹æ‰‹ï¼Œæ¯æ¬¡éƒ½åªèƒ½çœ‹åˆ°æ— æ•°è½å¯çš„èº«å½±å¤±æœ›çš„ç¦»å¼€ï¼Œç•¥æ„Ÿæ„§ç–šï¼ˆ**è¯·å…è®¸æˆ‘ä½¿ç”¨ä¸€ä¸‹å¤¸å¼ çš„ä¿®è¾æ‰‹æ³•**ï¼‰ã€‚

äºæ˜¯åœ¨ä¸€ä¸ªå¯‚å¯éš¾è€çš„å¤œæ™šï¼Œæˆ‘ç—›å®šæ€ç—›ï¼Œå†³å®šå¼€å§‹å†™**ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹**ç³»åˆ—ï¼Œå¸Œæœ›èƒ½å¸®åŠ©å„ä½è¯»è€…ä»¥åé¢è¯•åŠ¿å¦‚ç ´ç«¹ï¼Œå¯¹é¢è¯•å®˜è¿›è¡Œ360Â°çš„åå‡»ï¼ŒåŠæ‰“é—®ä½ çš„é¢è¯•å®˜ï¼Œè®©ä¸€åŒé¢è¯•çš„åŒåƒšç ç›®ç»“èˆŒï¼Œç–¯ç‹‚æ”¶å‰²å¤§å‚Offerï¼

## çµ®å¨

ä¸Šä¸€æœŸå› ä¸ºæ˜¯åœ¨åŒåä¸€ä¸€ç›´åœ¨ç†¬å¤œçš„å¤§ç¯å¢ƒä¸‹å®Œæˆçš„ï¼Œæ‰€ä»¥æˆ‘è‡ªå·±è§‰å¾—è´¨é‡æ˜æ˜¾æ²¡ä¹‹å‰çš„å¥½ï¼Œæˆ‘è¿™ä¸ä¸€ç¡å¥½å°±åŠ ç­åŠ ç‚¹å‡†å¤‡è¡¥å¿å¤§å®¶ï¼Œæ¥ç‚¹å¹²è´§ã€‚ï¼ˆç†¬å¤œå¤ªå®¹æ˜“æ„Ÿå†’äº†ï¼Œè¿™æ¬¡**ç‚¹ä¸ªèµ**åˆ«ç™½å«–äº†ï¼ï¼‰

é¡ºå¸¦æä¸€å˜´ï¼Œæˆ‘æŠŠæˆ‘å‡†å¤‡å†™å•¥ç”»äº†ä¸€ä¸ªæ€ç»´å¯¼å›¾ï¼Œä»¥åæ€»ä¸èƒ½æ¯ç¯‡éƒ½æ”¾ä¸ªè´¼å¤§çš„å›¾å§ï¼Œå°±å¼€æºåˆ°äº†æˆ‘çš„**[GitHub](https://github.com/AobingJava/JavaFamily)**ï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥å»å®Œå–„å’Œ**Star**ã€‚

è¿™ç¯‡æˆ‘å°±å…ˆæ”¾å‡ºæ¥å¤§å®¶çœ‹çœ‹ï¼Œæ„Ÿè§‰è¿˜æ˜¯å·®ç‚¹æ„æ€ï¼Œç­‰å¤§å®¶å®Œå–„äº†ã€‚

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8vdvnnqz4j30u029349w.jpg)



## å›æœ›è¿‡å»

ä¸Šä¸€æœŸåŠæ‰“ç³»åˆ—æˆ‘ä»¬æåˆ°äº†**Redis**ç›¸å…³çš„ä¸€äº›çŸ¥è¯†ï¼Œè¿˜æ²¡çœ‹çš„å°ä¼™ä¼´å¯ä»¥å›é¡¾ä¸€ä¸‹ 

- **[ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹ç³»åˆ—-RedisåŸºç¡€](https://juejin.im/post/5db66ed9e51d452a2f15d833)**
- **[ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹ç³»åˆ—-ç¼“å­˜é›ªå´©ã€å‡»ç©¿ã€ç©¿é€](https://juejin.im/post/5dbef8306fb9a0203f6fa3e2)**
- **[ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹ç³»åˆ—-Rediså“¨å…µã€æŒä¹…åŒ–ã€ä¸»ä»ã€æ‰‹æ’•LRU](https://juejin.im/post/5dc3a9fbf265da4d3c072eab)**
- **[ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹ç³»åˆ—-Redisç»ˆç« -å‡›å†¬å°†è‡³ã€FPX-æ–°ç‹ç™»åŸº](https://juejin.im/post/5dc850b4e51d452c2308ee27)**

è¿™æœŸæˆ‘å°±ä»ç¼“å­˜åˆ°ä¸€äº›å¸¸è§çš„é—®é¢˜è®²ä¸€ä¸‹ï¼Œæœ‰ä¸€äº›æˆ‘æ˜¯ä¹‹å‰æåˆ°è¿‡çš„ï¼Œä¸è¿‡å¯èƒ½å¤§éƒ¨åˆ†ä»”æ˜¯ç¬¬ä¸€æ¬¡çœ‹ï¼Œæˆ‘å°±é‡å¤å‘ä¸€ä¸‹ã€‚

### ç¼“å­˜çŸ¥è¯†ç‚¹

###### ![](https://www.lgstatic.com/i/image2/M01/8A/CA/CgoB5l14rXSAWVk7AAFdi6Ly8iM148.png)

   

### ç¼“å­˜æœ‰å“ªäº›ç±»å‹ï¼Ÿ

ç¼“å­˜æ˜¯é«˜å¹¶å‘åœºæ™¯ä¸‹æé«˜çƒ­ç‚¹æ•°æ®è®¿é—®æ€§èƒ½çš„ä¸€ä¸ªæœ‰æ•ˆæ‰‹æ®µï¼Œåœ¨å¼€å‘é¡¹ç›®æ—¶ä¼šç»å¸¸ä½¿ç”¨åˆ°ã€‚

ç¼“å­˜çš„ç±»å‹åˆ†ä¸ºï¼š**æœ¬åœ°ç¼“å­˜**ã€**åˆ†å¸ƒå¼ç¼“å­˜**å’Œ**å¤šçº§ç¼“å­˜**ã€‚

#### æœ¬åœ°ç¼“å­˜ï¼š 

**æœ¬åœ°ç¼“å­˜**å°±æ˜¯åœ¨è¿›ç¨‹çš„å†…å­˜ä¸­è¿›è¡Œç¼“å­˜ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„ **JVM** å †ä¸­ï¼Œå¯ä»¥ç”¨ **LRUMap** æ¥å®ç°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ **Ehcache** è¿™æ ·çš„å·¥å…·æ¥å®ç°ã€‚

æœ¬åœ°ç¼“å­˜æ˜¯å†…å­˜è®¿é—®ï¼Œæ²¡æœ‰è¿œç¨‹äº¤äº’å¼€é”€ï¼Œæ€§èƒ½æœ€å¥½ï¼Œä½†æ˜¯å—é™äºå•æœºå®¹é‡ï¼Œä¸€èˆ¬ç¼“å­˜è¾ƒå°ä¸”æ— æ³•æ‰©å±•ã€‚

####  åˆ†å¸ƒå¼ç¼“å­˜ï¼š

**åˆ†å¸ƒå¼ç¼“å­˜**å¯ä»¥å¾ˆå¥½å¾—è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

åˆ†å¸ƒå¼ç¼“å­˜ä¸€èˆ¬éƒ½å…·æœ‰è‰¯å¥½çš„æ°´å¹³æ‰©å±•èƒ½åŠ›ï¼Œå¯¹è¾ƒå¤§æ•°æ®é‡çš„åœºæ™¯ä¹Ÿèƒ½åº”ä»˜è‡ªå¦‚ã€‚ç¼ºç‚¹å°±æ˜¯éœ€è¦è¿›è¡Œè¿œç¨‹è¯·æ±‚ï¼Œæ€§èƒ½ä¸å¦‚æœ¬åœ°ç¼“å­˜ã€‚

####  å¤šçº§ç¼“å­˜ï¼š

ä¸ºäº†å¹³è¡¡è¿™ç§æƒ…å†µï¼Œå®é™…ä¸šåŠ¡ä¸­ä¸€èˆ¬é‡‡ç”¨**å¤šçº§ç¼“å­˜**ï¼Œæœ¬åœ°ç¼“å­˜åªä¿å­˜è®¿é—®é¢‘ç‡æœ€é«˜çš„éƒ¨åˆ†çƒ­ç‚¹æ•°æ®ï¼Œå…¶ä»–çš„çƒ­ç‚¹æ•°æ®æ”¾åœ¨åˆ†å¸ƒå¼ç¼“å­˜ä¸­ã€‚

åœ¨ç›®å‰çš„ä¸€çº¿å¤§å‚ä¸­ï¼Œè¿™ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ç¼“å­˜æ–¹æ¡ˆï¼Œå•è€ƒå•ä¸€çš„ç¼“å­˜æ–¹æ¡ˆå¾€å¾€éš¾ä»¥æ’‘ä½å¾ˆå¤šé«˜å¹¶å‘çš„åœºæ™¯ã€‚

### æ·˜æ±°ç­–ç•¥

ä¸ç®¡æ˜¯æœ¬åœ°ç¼“å­˜è¿˜æ˜¯åˆ†å¸ƒå¼ç¼“å­˜ï¼Œä¸ºäº†ä¿è¯è¾ƒé«˜æ€§èƒ½ï¼Œéƒ½æ˜¯ä½¿ç”¨å†…å­˜æ¥ä¿å­˜æ•°æ®ï¼Œç”±äºæˆæœ¬å’Œå†…å­˜é™åˆ¶ï¼Œå½“å­˜å‚¨çš„æ•°æ®è¶…è¿‡ç¼“å­˜å®¹é‡æ—¶ï¼Œéœ€è¦å¯¹ç¼“å­˜çš„æ•°æ®è¿›è¡Œå‰”é™¤ã€‚

ä¸€èˆ¬çš„å‰”é™¤ç­–ç•¥æœ‰ **FIFO** æ·˜æ±°æœ€æ—©æ•°æ®ã€**LRU** å‰”é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨ã€å’Œ **LFU** å‰”é™¤æœ€è¿‘ä½¿ç”¨é¢‘ç‡æœ€ä½çš„æ•°æ®å‡ ç§ç­–ç•¥ã€‚

- **noeviction**:è¿”å›é”™è¯¯å½“å†…å­˜é™åˆ¶è¾¾åˆ°å¹¶ä¸”å®¢æˆ·ç«¯å°è¯•æ‰§è¡Œä¼šè®©æ›´å¤šå†…å­˜è¢«ä½¿ç”¨çš„å‘½ä»¤ï¼ˆå¤§éƒ¨åˆ†çš„å†™å…¥æŒ‡ä»¤ï¼Œä½†DELå’Œå‡ ä¸ªä¾‹å¤–ï¼‰

- **allkeys-lru**: å°è¯•å›æ”¶æœ€å°‘ä½¿ç”¨çš„é”®ï¼ˆLRUï¼‰ï¼Œä½¿å¾—æ–°æ·»åŠ çš„æ•°æ®æœ‰ç©ºé—´å­˜æ”¾ã€‚

- **volatile-lru**: å°è¯•å›æ”¶æœ€å°‘ä½¿ç”¨çš„é”®ï¼ˆLRUï¼‰ï¼Œä½†ä»…é™äºåœ¨è¿‡æœŸé›†åˆçš„é”®,ä½¿å¾—æ–°æ·»åŠ çš„æ•°æ®æœ‰ç©ºé—´å­˜æ”¾ã€‚

- **allkeys-random**: å›æ”¶éšæœºçš„é”®ä½¿å¾—æ–°æ·»åŠ çš„æ•°æ®æœ‰ç©ºé—´å­˜æ”¾ã€‚

- **volatile-random**: å›æ”¶éšæœºçš„é”®ä½¿å¾—æ–°æ·»åŠ çš„æ•°æ®æœ‰ç©ºé—´å­˜æ”¾ï¼Œä½†ä»…é™äºåœ¨è¿‡æœŸé›†åˆçš„é”®ã€‚

- **volatile-ttl**: å›æ”¶åœ¨è¿‡æœŸé›†åˆçš„é”®ï¼Œå¹¶ä¸”ä¼˜å…ˆå›æ”¶å­˜æ´»æ—¶é—´ï¼ˆTTLï¼‰è¾ƒçŸ­çš„é”®,ä½¿å¾—æ–°æ·»åŠ çš„æ•°æ®æœ‰ç©ºé—´å­˜æ”¾ã€‚

  å¦‚æœæ²¡æœ‰é”®æ»¡è¶³å›æ”¶çš„å‰ææ¡ä»¶çš„è¯ï¼Œç­–ç•¥**volatile-lru**, **volatile-random**ä»¥åŠ**volatile-ttl**å°±å’Œnoeviction å·®ä¸å¤šäº†ã€‚

å…¶å®åœ¨å¤§å®¶ç†Ÿæ‚‰çš„**LinkedHashMap**ä¸­ä¹Ÿå®ç°äº†Lruç®—æ³•çš„ï¼Œå®ç°å¦‚ä¸‹ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8p9gl0t7nj30qw08p3z4.jpg)

å½“å®¹é‡è¶…è¿‡100æ—¶ï¼Œå¼€å§‹æ‰§è¡Œ**LRU**ç­–ç•¥ï¼šå°†æœ€è¿‘æœ€å°‘æœªä½¿ç”¨çš„ **TimeoutInfoHolder** å¯¹è±¡ **evict** æ‰ã€‚

çœŸå®é¢è¯•ä¸­ä¼šè®©ä½ å†™LURç®—æ³•ï¼Œä½ å¯åˆ«æåŸå§‹çš„é‚£ä¸ªï¼Œé‚£çœŸTMå¤šï¼Œå†™ä¸å®Œçš„ï¼Œä½ è¦ä¹ˆæ€¼ä¸Šé¢è¿™ä¸ªï¼Œè¦ä¹ˆæ€¼ä¸‹é¢è¿™ä¸ªï¼Œæ‰¾ä¸€ä¸ªæ•°æ®ç»“æ„å®ç°ä¸‹Javaç‰ˆæœ¬çš„LRUè¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ï¼ŒçŸ¥é“å•¥åŸç†å°±å¥½äº†ã€‚

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8orgm8oj0j30p10f7wfq.jpg)



### Memcache

æ³¨æ„åé¢ä¼šæŠŠ **Memcache** ç®€ç§°ä¸º MCã€‚

å…ˆæ¥çœ‹çœ‹ MC çš„ç‰¹ç‚¹ï¼š

- MC å¤„ç†è¯·æ±‚æ—¶ä½¿ç”¨å¤šçº¿ç¨‹å¼‚æ­¥ IO çš„æ–¹å¼ï¼Œå¯ä»¥åˆç†åˆ©ç”¨ CPU å¤šæ ¸çš„ä¼˜åŠ¿ï¼Œæ€§èƒ½éå¸¸ä¼˜ç§€ï¼›
- MC åŠŸèƒ½ç®€å•ï¼Œä½¿ç”¨å†…å­˜å­˜å‚¨æ•°æ®ï¼›
- MC çš„å†…å­˜ç»“æ„ä»¥åŠé’™åŒ–é—®é¢˜æˆ‘å°±ä¸ç»†è¯´äº†ï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹[å®˜ç½‘](http://www.memcached.org/about)äº†è§£ä¸‹ï¼›
- MC å¯¹ç¼“å­˜çš„æ•°æ®å¯ä»¥è®¾ç½®å¤±æ•ˆæœŸï¼Œè¿‡æœŸåçš„æ•°æ®ä¼šè¢«æ¸…é™¤ï¼›
- å¤±æ•ˆçš„ç­–ç•¥é‡‡ç”¨å»¶è¿Ÿå¤±æ•ˆï¼Œå°±æ˜¯å½“å†æ¬¡ä½¿ç”¨æ•°æ®æ—¶æ£€æŸ¥æ˜¯å¦å¤±æ•ˆï¼›
- å½“å®¹é‡å­˜æ»¡æ—¶ï¼Œä¼šå¯¹ç¼“å­˜ä¸­çš„æ•°æ®è¿›è¡Œå‰”é™¤ï¼Œå‰”é™¤æ—¶é™¤äº†ä¼šå¯¹è¿‡æœŸ key è¿›è¡Œæ¸…ç†ï¼Œè¿˜ä¼šæŒ‰ LRU ç­–ç•¥å¯¹æ•°æ®è¿›è¡Œå‰”é™¤ã€‚



å¦å¤–ï¼Œä½¿ç”¨ MC æœ‰ä¸€äº›é™åˆ¶ï¼Œè¿™äº›é™åˆ¶åœ¨ç°åœ¨çš„äº’è”ç½‘åœºæ™¯ä¸‹å¾ˆè‡´å‘½ï¼Œæˆä¸ºå¤§å®¶é€‰æ‹©**Redis**ã€**MongoDB**çš„é‡è¦åŸå› ï¼š

- key ä¸èƒ½è¶…è¿‡ 250 ä¸ªå­—èŠ‚ï¼›
- value ä¸èƒ½è¶…è¿‡ 1M å­—èŠ‚ï¼›
- key çš„æœ€å¤§å¤±æ•ˆæ—¶é—´æ˜¯ 30 å¤©ï¼›
- åªæ”¯æŒ K-V ç»“æ„ï¼Œä¸æä¾›æŒä¹…åŒ–å’Œä¸»ä»åŒæ­¥åŠŸèƒ½ã€‚



### Redis

å…ˆç®€å•è¯´ä¸€ä¸‹ **Redis** çš„ç‰¹ç‚¹ï¼Œæ–¹ä¾¿å’Œ MC æ¯”è¾ƒã€‚

- ä¸ MC ä¸åŒçš„æ˜¯ï¼ŒRedis é‡‡ç”¨å•çº¿ç¨‹æ¨¡å¼å¤„ç†è¯·æ±‚ã€‚è¿™æ ·åšçš„åŸå› æœ‰ 2 ä¸ªï¼šä¸€ä¸ªæ˜¯å› ä¸ºé‡‡ç”¨äº†éé˜»å¡çš„å¼‚æ­¥äº‹ä»¶å¤„ç†æœºåˆ¶ï¼›å¦ä¸€ä¸ªæ˜¯ç¼“å­˜æ•°æ®éƒ½æ˜¯å†…å­˜æ“ä½œ IO æ—¶é—´ä¸ä¼šå¤ªé•¿ï¼Œå•çº¿ç¨‹å¯ä»¥é¿å…çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢äº§ç”Ÿçš„ä»£ä»·ã€‚
- **Redis** æ”¯æŒæŒä¹…åŒ–ï¼Œæ‰€ä»¥ Redis ä¸ä»…ä»…å¯ä»¥ç”¨ä½œç¼“å­˜ï¼Œä¹Ÿå¯ä»¥ç”¨ä½œ NoSQL æ•°æ®åº“ã€‚
- ç›¸æ¯” MCï¼Œ**Redis** è¿˜æœ‰ä¸€ä¸ªéå¸¸å¤§çš„ä¼˜åŠ¿ï¼Œå°±æ˜¯é™¤äº† K-V ä¹‹å¤–ï¼Œè¿˜æ”¯æŒå¤šç§æ•°æ®æ ¼å¼ï¼Œä¾‹å¦‚ listã€setã€sorted setã€hash ç­‰ã€‚
- **Redis** æä¾›ä¸»ä»åŒæ­¥æœºåˆ¶ï¼Œä»¥åŠ **Cluster** é›†ç¾¤éƒ¨ç½²èƒ½åŠ›ï¼Œèƒ½å¤Ÿæä¾›é«˜å¯ç”¨æœåŠ¡ã€‚

# 

### è¯¦è§£ Redis

Redis çš„çŸ¥è¯†ç‚¹ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚



![](https://www.lgstatic.com/i/image2/M01/8A/CA/CgoB5l14rXSAHFMcAAFKedIz0a0877.png)

   



### åŠŸèƒ½

æ¥çœ‹ **Redis** æä¾›çš„åŠŸèƒ½æœ‰å“ªäº›å§ï¼

#### æˆ‘ä»¬å…ˆçœ‹åŸºç¡€ç±»å‹ï¼š

#### **Stringï¼š**

**String** ç±»å‹æ˜¯ **Redis** ä¸­æœ€å¸¸ä½¿ç”¨çš„ç±»å‹ï¼Œå†…éƒ¨çš„å®ç°æ˜¯é€šè¿‡ **SDS**ï¼ˆSimple Dynamic String ï¼‰æ¥å­˜å‚¨çš„ã€‚SDS ç±»ä¼¼äº **Java** ä¸­çš„ **ArrayList**ï¼Œå¯ä»¥é€šè¿‡é¢„åˆ†é…å†—ä½™ç©ºé—´çš„æ–¹å¼æ¥å‡å°‘å†…å­˜çš„é¢‘ç¹åˆ†é…ã€‚

è¿™æ˜¯æœ€ç®€å•çš„ç±»å‹ï¼Œå°±æ˜¯æ™®é€šçš„ set å’Œ getï¼Œåšç®€å•çš„ KV ç¼“å­˜ã€‚

ä½†æ˜¯çœŸå®çš„å¼€å‘ç¯å¢ƒä¸­ï¼Œå¾ˆå¤šä»”å¯èƒ½ä¼šæŠŠå¾ˆå¤šæ¯”è¾ƒå¤æ‚çš„ç»“æ„ä¹Ÿç»Ÿä¸€è½¬æˆ**String**å»å­˜å‚¨ä½¿ç”¨ï¼Œæ¯”å¦‚æœ‰çš„ä»”ä»–å°±å–œæ¬¢æŠŠå¯¹è±¡æˆ–è€…**List**è½¬æ¢ä¸º**JSONString**è¿›è¡Œå­˜å‚¨ï¼Œæ‹¿å‡ºæ¥å†ååºåˆ—è¯å•¥çš„ã€‚

æˆ‘åœ¨è¿™é‡Œå°±ä¸è®¨è®ºè¿™æ ·åšçš„å¯¹é”™äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å¸Œæœ›å¤§å®¶èƒ½åœ¨æœ€åˆé€‚çš„åœºæ™¯ä½¿ç”¨æœ€åˆé€‚çš„æ•°æ®ç»“æ„ï¼Œå¯¹è±¡æ‰¾ä¸åˆ°æœ€åˆé€‚çš„ä½†æ˜¯ç±»å‹å¯ä»¥é€‰æœ€åˆé€‚çš„å˜›ï¼Œä¹‹ååˆ«äººæ¥æ‰‹ä½ çš„ä»£ç ä¸€çœ‹è¿™ä¹ˆ**è§„èŒƒ**ï¼Œè¯¶è¿™å°ä¼™å­**æœ‰ç‚¹ä¸œè¥¿**å‘€ï¼Œçœ‹åˆ°ä½ å•¥éƒ½æ˜¯ç”¨çš„**String**ï¼Œ**åƒåœ¾ï¼**

![](https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=454498675,4139436609&fm=26&gp=0.jpg)

å¥½äº†è¿™äº›éƒ½æ˜¯é¢˜å¤–è¯äº†ï¼Œé“ç†è¿˜æ˜¯å¸Œæœ›å¤§å®¶è®°åœ¨å¿ƒé‡Œï¼Œä¹ æƒ¯æˆè‡ªç„¶å˜›ï¼Œå°ä¹ æƒ¯æˆå°±ä½ ã€‚

**String**çš„å®é™…åº”ç”¨åœºæ™¯æ¯”è¾ƒå¹¿æ³›çš„æœ‰ï¼š

- **ç¼“å­˜åŠŸèƒ½ï¼šString**å­—ç¬¦ä¸²æ˜¯æœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼Œä¸ä»…ä»…æ˜¯**Redis**ï¼Œå„ä¸ªè¯­è¨€éƒ½æ˜¯æœ€åŸºæœ¬ç±»å‹ï¼Œå› æ­¤ï¼Œåˆ©ç”¨**Redis**ä½œä¸ºç¼“å­˜ï¼Œé…åˆå…¶å®ƒæ•°æ®åº“ä½œä¸ºå­˜å‚¨å±‚ï¼Œåˆ©ç”¨**Redis**æ”¯æŒé«˜å¹¶å‘çš„ç‰¹ç‚¹ï¼Œå¯ä»¥å¤§å¤§åŠ å¿«ç³»ç»Ÿçš„è¯»å†™é€Ÿåº¦ã€ä»¥åŠé™ä½åç«¯æ•°æ®åº“çš„å‹åŠ›ã€‚

- **è®¡æ•°å™¨ï¼š**è®¸å¤šç³»ç»Ÿéƒ½ä¼šä½¿ç”¨**Redis**ä½œä¸ºç³»ç»Ÿçš„å®æ—¶è®¡æ•°å™¨ï¼Œå¯ä»¥å¿«é€Ÿå®ç°è®¡æ•°å’ŒæŸ¥è¯¢çš„åŠŸèƒ½ã€‚è€Œä¸”æœ€ç»ˆçš„æ•°æ®ç»“æœå¯ä»¥æŒ‰ç…§ç‰¹å®šçš„æ—¶é—´è½åœ°åˆ°æ•°æ®åº“æˆ–è€…å…¶å®ƒå­˜å‚¨ä»‹è´¨å½“ä¸­è¿›è¡Œæ°¸ä¹…ä¿å­˜ã€‚

- **å…±äº«ç”¨æˆ·Sessionï¼š**ç”¨æˆ·é‡æ–°åˆ·æ–°ä¸€æ¬¡ç•Œé¢ï¼Œå¯èƒ½éœ€è¦è®¿é—®ä¸€ä¸‹æ•°æ®è¿›è¡Œé‡æ–°ç™»å½•ï¼Œæˆ–è€…è®¿é—®é¡µé¢ç¼“å­˜**Cookie**ï¼Œä½†æ˜¯å¯ä»¥åˆ©ç”¨**Redis**å°†ç”¨æˆ·çš„**Session**é›†ä¸­ç®¡ç†ï¼Œåœ¨è¿™ç§æ¨¡å¼åªéœ€è¦ä¿è¯**Redis**çš„é«˜å¯ç”¨ï¼Œæ¯æ¬¡ç”¨æˆ·**Session**çš„æ›´æ–°å’Œè·å–éƒ½å¯ä»¥å¿«é€Ÿå®Œæˆã€‚å¤§å¤§æé«˜æ•ˆç‡ã€‚

#### **Hashï¼š**

è¿™ä¸ªæ˜¯ç±»ä¼¼ **Map** çš„ä¸€ç§ç»“æ„ï¼Œè¿™ä¸ªä¸€èˆ¬å°±æ˜¯å¯ä»¥å°†ç»“æ„åŒ–çš„æ•°æ®ï¼Œæ¯”å¦‚ä¸€ä¸ªå¯¹è±¡ï¼ˆå‰ææ˜¯**è¿™ä¸ªå¯¹è±¡æ²¡åµŒå¥—å…¶ä»–çš„å¯¹è±¡**ï¼‰ç»™ç¼“å­˜åœ¨ **Redis** é‡Œï¼Œç„¶åæ¯æ¬¡è¯»å†™ç¼“å­˜çš„æ—¶å€™ï¼Œå¯ä»¥å°±æ“ä½œ **Hash** é‡Œçš„**æŸä¸ªå­—æ®µ**ã€‚

ä½†æ˜¯è¿™ä¸ªçš„åœºæ™¯å…¶å®è¿˜æ˜¯å¤šå°‘å•ä¸€äº†ä¸€äº›ï¼Œå› ä¸ºç°åœ¨å¾ˆå¤šå¯¹è±¡éƒ½æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæ¯”å¦‚ä½ çš„å•†å“å¯¹è±¡å¯èƒ½é‡Œé¢å°±åŒ…å«äº†å¾ˆå¤šå±æ€§ï¼Œå…¶ä¸­ä¹Ÿæœ‰å¯¹è±¡ã€‚æˆ‘è‡ªå·±ä½¿ç”¨çš„åœºæ™¯ç”¨å¾—ä¸æ˜¯é‚£ä¹ˆå¤šã€‚

#### **Listï¼š**

**List** æ˜¯æœ‰åºåˆ—è¡¨ï¼Œè¿™ä¸ªè¿˜æ˜¯å¯ä»¥ç©å„¿å‡ºå¾ˆå¤šèŠ±æ ·çš„ã€‚

æ¯”å¦‚å¯ä»¥é€šè¿‡ **List** å­˜å‚¨ä¸€äº›åˆ—è¡¨å‹çš„æ•°æ®ç»“æ„ï¼Œç±»ä¼¼ç²‰ä¸åˆ—è¡¨ã€æ–‡ç« çš„è¯„è®ºåˆ—è¡¨ä¹‹ç±»çš„ä¸œè¥¿ã€‚

æ¯”å¦‚å¯ä»¥é€šè¿‡ **lrange** å‘½ä»¤ï¼Œè¯»å–æŸä¸ªé—­åŒºé—´å†…çš„å…ƒç´ ï¼Œå¯ä»¥åŸºäº **List** å®ç°åˆ†é¡µæŸ¥è¯¢ï¼Œè¿™ä¸ªæ˜¯å¾ˆæ£’çš„ä¸€ä¸ªåŠŸèƒ½ï¼ŒåŸºäº **Redis** å®ç°ç®€å•çš„é«˜æ€§èƒ½åˆ†é¡µï¼Œå¯ä»¥åšç±»ä¼¼å¾®åšé‚£ç§ä¸‹æ‹‰ä¸æ–­åˆ†é¡µçš„ä¸œè¥¿ï¼Œæ€§èƒ½é«˜ï¼Œå°±ä¸€é¡µä¸€é¡µèµ°ã€‚

æ¯”å¦‚å¯ä»¥æä¸ªç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä» **List** å¤´æ€¼è¿›å»ï¼Œä» **List** å±è‚¡é‚£é‡Œå¼„å‡ºæ¥ã€‚

**List**æœ¬èº«å°±æ˜¯æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ¯”è¾ƒå¸¸ç”¨çš„æ•°æ®ç»“æ„äº†ï¼Œçƒ­ç‚¹æ•°æ®æ›´ä¸ç”¨è¯´äº†ã€‚

- **æ¶ˆæ¯é˜Ÿåˆ—ï¼šRedis**çš„é“¾è¡¨ç»“æ„ï¼Œå¯ä»¥è½»æ¾å®ç°é˜»å¡é˜Ÿåˆ—ï¼Œå¯ä»¥ä½¿ç”¨å·¦è¿›å³å‡ºçš„å‘½ä»¤ç»„æˆæ¥å®Œæˆé˜Ÿåˆ—çš„è®¾è®¡ã€‚æ¯”å¦‚ï¼šæ•°æ®çš„ç”Ÿäº§è€…å¯ä»¥é€šè¿‡**Lpush**å‘½ä»¤ä»å·¦è¾¹æ’å…¥æ•°æ®ï¼Œå¤šä¸ªæ•°æ®æ¶ˆè´¹è€…ï¼Œå¯ä»¥ä½¿ç”¨**BRpop**å‘½ä»¤é˜»å¡çš„â€œæŠ¢â€åˆ—è¡¨å°¾éƒ¨çš„æ•°æ®ã€‚

- æ–‡ç« åˆ—è¡¨æˆ–è€…æ•°æ®åˆ†é¡µå±•ç¤ºçš„åº”ç”¨ã€‚

  æ¯”å¦‚ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„åšå®¢ç½‘ç«™çš„æ–‡ç« åˆ—è¡¨ï¼Œå½“ç”¨æˆ·é‡è¶Šæ¥è¶Šå¤šæ—¶ï¼Œè€Œä¸”æ¯ä¸€ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±çš„æ–‡ç« åˆ—è¡¨ï¼Œè€Œä¸”å½“æ–‡ç« å¤šæ—¶ï¼Œéƒ½éœ€è¦åˆ†é¡µå±•ç¤ºï¼Œè¿™æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨**Redis**çš„åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸ä½†æœ‰åºåŒæ—¶è¿˜æ”¯æŒæŒ‰ç…§èŒƒå›´å†…è·å–å…ƒç´ ï¼Œå¯ä»¥å®Œç¾è§£å†³åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½ã€‚å¤§å¤§æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚

#### **Setï¼š**

**Set** æ˜¯æ— åºé›†åˆï¼Œä¼šè‡ªåŠ¨å»é‡çš„é‚£ç§ã€‚

ç›´æ¥åŸºäº **Set** å°†ç³»ç»Ÿé‡Œéœ€è¦å»é‡çš„æ•°æ®æ‰”è¿›å»ï¼Œè‡ªåŠ¨å°±ç»™å»é‡äº†ï¼Œå¦‚æœä½ éœ€è¦å¯¹ä¸€äº›æ•°æ®è¿›è¡Œå¿«é€Ÿçš„å…¨å±€å»é‡ï¼Œä½ å½“ç„¶ä¹Ÿå¯ä»¥åŸºäº **JVM** å†…å­˜é‡Œçš„ **HashSet** è¿›è¡Œå»é‡ï¼Œä½†æ˜¯å¦‚æœä½ çš„æŸä¸ªç³»ç»Ÿéƒ¨ç½²åœ¨å¤šå°æœºå™¨ä¸Šå‘¢ï¼Ÿå¾—åŸºäº**Redis**è¿›è¡Œå…¨å±€çš„ **Set** å»é‡ã€‚

å¯ä»¥åŸºäº **Set** ç©å„¿äº¤é›†ã€å¹¶é›†ã€å·®é›†çš„æ“ä½œï¼Œæ¯”å¦‚äº¤é›†å§ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸¤ä¸ªäººçš„å¥½å‹åˆ—è¡¨æ•´ä¸€ä¸ªäº¤é›†ï¼Œçœ‹çœ‹ä¿©äººçš„å…±åŒå¥½å‹æ˜¯è°ï¼Ÿå¯¹å§ã€‚

åæ­£è¿™äº›åœºæ™¯æ¯”è¾ƒå¤šï¼Œå› ä¸ºå¯¹æ¯”å¾ˆå¿«ï¼Œæ“ä½œä¹Ÿç®€å•ï¼Œä¸¤ä¸ªæŸ¥è¯¢ä¸€ä¸ª**Set**æå®šã€‚

#### **Sorted Setï¼š**

**Sorted set** æ˜¯æ’åºçš„ **Set**ï¼Œå»é‡ä½†å¯ä»¥æ’åºï¼Œå†™è¿›å»çš„æ—¶å€™ç»™ä¸€ä¸ªåˆ†æ•°ï¼Œè‡ªåŠ¨æ ¹æ®åˆ†æ•°æ’åºã€‚

æœ‰åºé›†åˆçš„ä½¿ç”¨åœºæ™¯ä¸é›†åˆç±»ä¼¼ï¼Œä½†æ˜¯seté›†åˆä¸æ˜¯è‡ªåŠ¨æœ‰åºçš„ï¼Œè€Œ**Sorted set**å¯ä»¥åˆ©ç”¨åˆ†æ•°è¿›è¡Œæˆå‘˜é—´çš„æ’åºï¼Œè€Œä¸”æ˜¯æ’å…¥æ—¶å°±æ’åºå¥½ã€‚æ‰€ä»¥å½“ä½ éœ€è¦ä¸€ä¸ªæœ‰åºä¸”ä¸é‡å¤çš„é›†åˆåˆ—è¡¨æ—¶ï¼Œå°±å¯ä»¥é€‰æ‹©**Sorted set**æ•°æ®ç»“æ„ä½œä¸ºé€‰æ‹©æ–¹æ¡ˆã€‚

- æ’è¡Œæ¦œï¼šæœ‰åºé›†åˆç»å…¸ä½¿ç”¨åœºæ™¯ã€‚ä¾‹å¦‚è§†é¢‘ç½‘ç«™éœ€è¦å¯¹ç”¨æˆ·ä¸Šä¼ çš„è§†é¢‘åšæ’è¡Œæ¦œï¼Œæ¦œå•ç»´æŠ¤å¯èƒ½æ˜¯å¤šæ–¹é¢ï¼šæŒ‰ç…§æ—¶é—´ã€æŒ‰ç…§æ’­æ”¾é‡ã€æŒ‰ç…§è·å¾—çš„èµæ•°ç­‰ã€‚

- ç”¨**Sorted Sets**æ¥åšå¸¦æƒé‡çš„é˜Ÿåˆ—ï¼Œæ¯”å¦‚æ™®é€šæ¶ˆæ¯çš„scoreä¸º1ï¼Œé‡è¦æ¶ˆæ¯çš„scoreä¸º2ï¼Œç„¶åå·¥ä½œçº¿ç¨‹å¯ä»¥é€‰æ‹©æŒ‰scoreçš„å€’åºæ¥è·å–å·¥ä½œä»»åŠ¡ã€‚è®©é‡è¦çš„ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œã€‚

  å¾®åšçƒ­æœæ¦œï¼Œå°±æ˜¯æœ‰ä¸ªåé¢çš„çƒ­åº¦å€¼ï¼Œå‰é¢å°±æ˜¯åç§°



### é«˜çº§ç”¨æ³•ï¼š

#### **Bitmap** :

ä½å›¾æ˜¯æ”¯æŒæŒ‰ bit ä½æ¥å­˜å‚¨ä¿¡æ¯ï¼Œå¯ä»¥ç”¨æ¥å®ç° **å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloomFilterï¼‰**ï¼›

#### **HyperLogLog:** 

ä¾›ä¸ç²¾ç¡®çš„å»é‡è®¡æ•°åŠŸèƒ½ï¼Œæ¯”è¾ƒé€‚åˆç”¨æ¥åšå¤§è§„æ¨¡æ•°æ®çš„å»é‡ç»Ÿè®¡ï¼Œä¾‹å¦‚ç»Ÿè®¡ UVï¼›

#### **Geospatial:** 

å¯ä»¥ç”¨æ¥ä¿å­˜åœ°ç†ä½ç½®ï¼Œå¹¶ä½œä½ç½®è·ç¦»è®¡ç®—æˆ–è€…æ ¹æ®åŠå¾„è®¡ç®—ä½ç½®ç­‰ã€‚æœ‰æ²¡æœ‰æƒ³è¿‡ç”¨Redisæ¥å®ç°é™„è¿‘çš„äººï¼Ÿæˆ–è€…è®¡ç®—æœ€ä¼˜åœ°å›¾è·¯å¾„ï¼Ÿ

è¿™ä¸‰ä¸ªå…¶å®ä¹Ÿå¯ä»¥ç®—ä½œä¸€ç§æ•°æ®ç»“æ„ï¼Œä¸çŸ¥é“è¿˜æœ‰å¤šå°‘æœ‹å‹è®°å¾—ï¼Œæˆ‘åœ¨æ¢¦å¼€å§‹çš„åœ°æ–¹ï¼ŒRedisåŸºç¡€ä¸­æåˆ°è¿‡ï¼Œä½ å¦‚æœåªçŸ¥é“äº”ç§åŸºç¡€ç±»å‹é‚£åªèƒ½æ‹¿60åˆ†ï¼Œå¦‚æœä½ èƒ½è®²å‡ºé«˜çº§ç”¨æ³•ï¼Œé‚£å°±è§‰å¾—ä½ **æœ‰ç‚¹ä¸œè¥¿**ã€‚

#### **pub/subï¼š**

 åŠŸèƒ½æ˜¯è®¢é˜…å‘å¸ƒåŠŸèƒ½ï¼Œå¯ä»¥ç”¨ä½œç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚ 

#### **Pipelineï¼š**

å¯ä»¥æ‰¹é‡æ‰§è¡Œä¸€ç»„æŒ‡ä»¤ï¼Œä¸€æ¬¡æ€§è¿”å›å…¨éƒ¨ç»“æœï¼Œå¯ä»¥å‡å°‘é¢‘ç¹çš„è¯·æ±‚åº”ç­”ã€‚

#### **Luaï¼š**

**Redis** æ”¯æŒæäº¤ **Lua** è„šæœ¬æ¥æ‰§è¡Œä¸€ç³»åˆ—çš„åŠŸèƒ½ã€‚

æˆ‘åœ¨å‰ç”µå•†è€ä¸œå®¶çš„æ—¶å€™ï¼Œç§’æ€åœºæ™¯ç»å¸¸ä½¿ç”¨è¿™ä¸ªä¸œè¥¿ï¼Œè®²é“ç†æœ‰ç‚¹é¦™ï¼Œåˆ©ç”¨ä»–çš„åŸå­æ€§ã€‚

è¯è¯´ä½ ä»¬æƒ³çœ‹ç§’æ€çš„è®¾è®¡ä¹ˆï¼Ÿæˆ‘è®°å¾—æˆ‘é¢è¯•å¥½åƒæ¯æ¬¡éƒ½é—®å•Šï¼Œæƒ³çœ‹çš„ç›´æ¥**ç‚¹èµ**åè¯„è®ºç§’æ€å§ã€‚

####  **äº‹åŠ¡ï¼š**

æœ€åä¸€ä¸ªåŠŸèƒ½æ˜¯äº‹åŠ¡ï¼Œä½† **Redis** æä¾›çš„ä¸æ˜¯ä¸¥æ ¼çš„äº‹åŠ¡ï¼Œ**Redis** åªä¿è¯ä¸²è¡Œæ‰§è¡Œå‘½ä»¤ï¼Œå¹¶ä¸”èƒ½ä¿è¯å…¨éƒ¨æ‰§è¡Œï¼Œä½†æ˜¯æ‰§è¡Œå‘½ä»¤å¤±è´¥æ—¶å¹¶ä¸ä¼šå›æ»šï¼Œè€Œæ˜¯ä¼šç»§ç»­æ‰§è¡Œä¸‹å»ã€‚

### æŒä¹…åŒ–

**Redis** æä¾›äº† RDB å’Œ AOF ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼ŒRDB æ˜¯æŠŠå†…å­˜ä¸­çš„æ•°æ®é›†ä»¥å¿«ç…§å½¢å¼å†™å…¥ç£ç›˜ï¼Œå®é™…æ“ä½œæ˜¯é€šè¿‡ fork å­è¿›ç¨‹æ‰§è¡Œï¼Œé‡‡ç”¨äºŒè¿›åˆ¶å‹ç¼©å­˜å‚¨ï¼›AOF æ˜¯ä»¥æ–‡æœ¬æ—¥å¿—çš„å½¢å¼è®°å½• **Redis** å¤„ç†çš„æ¯ä¸€ä¸ªå†™å…¥æˆ–åˆ é™¤æ“ä½œã€‚

**RDB** æŠŠæ•´ä¸ª Redis çš„æ•°æ®ä¿å­˜åœ¨å•ä¸€æ–‡ä»¶ä¸­ï¼Œæ¯”è¾ƒé€‚åˆç”¨æ¥åšç¾å¤‡ï¼Œä½†ç¼ºç‚¹æ˜¯å¿«ç…§ä¿å­˜å®Œæˆä¹‹å‰å¦‚æœå®•æœºï¼Œè¿™æ®µæ—¶é—´çš„æ•°æ®å°†ä¼šä¸¢å¤±ï¼Œå¦å¤–ä¿å­˜å¿«ç…§æ—¶å¯èƒ½å¯¼è‡´æœåŠ¡çŸ­æ—¶é—´ä¸å¯ç”¨ã€‚ 

**AOF** å¯¹æ—¥å¿—æ–‡ä»¶çš„å†™å…¥æ“ä½œä½¿ç”¨çš„è¿½åŠ æ¨¡å¼ï¼Œæœ‰çµæ´»çš„åŒæ­¥ç­–ç•¥ï¼Œæ”¯æŒæ¯ç§’åŒæ­¥ã€æ¯æ¬¡ä¿®æ”¹åŒæ­¥å’Œä¸åŒæ­¥ï¼Œç¼ºç‚¹å°±æ˜¯ç›¸åŒè§„æ¨¡çš„æ•°æ®é›†ï¼ŒAOF è¦å¤§äº RDBï¼ŒAOF åœ¨è¿è¡Œæ•ˆç‡ä¸Šå¾€å¾€ä¼šæ…¢äº RDBã€‚

ç»†èŠ‚çš„ç‚¹å¤§å®¶å»é«˜å¯ç”¨è¿™ç« çœ‹ï¼Œç‰¹åˆ«æ˜¯ä¸¤è€…çš„ä¼˜ç¼ºç‚¹ï¼Œä»¥åŠæ€ä¹ˆæŠ‰æ‹©ã€‚

**[ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹ç³»åˆ—-Rediså“¨å…µã€æŒä¹…åŒ–ã€ä¸»ä»ã€æ‰‹æ’•LRU](https://juejin.im/post/5dc3a9fbf265da4d3c072eab)**

### é«˜å¯ç”¨

æ¥çœ‹ Redis çš„é«˜å¯ç”¨ã€‚Redis æ”¯æŒä¸»ä»åŒæ­¥ï¼Œæä¾› Cluster é›†ç¾¤éƒ¨ç½²æ¨¡å¼ï¼Œé€šè¿‡ Sentine lå“¨å…µæ¥ç›‘æ§ Redis ä¸»æœåŠ¡å™¨çš„çŠ¶æ€ã€‚å½“ä¸»æŒ‚æ‰æ—¶ï¼Œåœ¨ä»èŠ‚ç‚¹ä¸­æ ¹æ®ä¸€å®šç­–ç•¥é€‰å‡ºæ–°ä¸»ï¼Œå¹¶è°ƒæ•´å…¶ä»–ä» slaveof åˆ°æ–°ä¸»ã€‚ 

é€‰ä¸»çš„ç­–ç•¥ç®€å•æ¥è¯´æœ‰ä¸‰ä¸ªï¼š

- slave çš„ priority è®¾ç½®çš„è¶Šä½ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼›
- åŒç­‰æƒ…å†µä¸‹ï¼Œslave å¤åˆ¶çš„æ•°æ®è¶Šå¤šä¼˜å…ˆçº§è¶Šé«˜ï¼›
- ç›¸åŒçš„æ¡ä»¶ä¸‹ runid è¶Šå°è¶Šå®¹æ˜“è¢«é€‰ä¸­ã€‚

åœ¨ Redis é›†ç¾¤ä¸­ï¼Œsentinel ä¹Ÿä¼šè¿›è¡Œå¤šå®ä¾‹éƒ¨ç½²ï¼Œsentinel ä¹‹é—´é€šè¿‡ Raft åè®®æ¥ä¿è¯è‡ªèº«çš„é«˜å¯ç”¨ã€‚

Redis Cluster ä½¿ç”¨åˆ†ç‰‡æœºåˆ¶ï¼Œåœ¨å†…éƒ¨åˆ†ä¸º 16384 ä¸ª slot æ’æ§½ï¼Œåˆ†å¸ƒåœ¨æ‰€æœ‰ master èŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ª master èŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ† slotã€‚æ•°æ®æ“ä½œæ—¶æŒ‰ key åš CRC16 æ¥è®¡ç®—åœ¨å“ªä¸ª slotï¼Œç”±å“ªä¸ª master è¿›è¡Œå¤„ç†ã€‚æ•°æ®çš„å†—ä½™æ˜¯é€šè¿‡ slave èŠ‚ç‚¹æ¥ä¿éšœã€‚

### å“¨å…µ

å“¨å…µå¿…é¡»ç”¨ä¸‰ä¸ªå®ä¾‹å»ä¿è¯è‡ªå·±çš„å¥å£®æ€§çš„ï¼Œå“¨å…µ+ä¸»ä»å¹¶**ä¸èƒ½ä¿è¯æ•°æ®ä¸ä¸¢å¤±**ï¼Œä½†æ˜¯å¯ä»¥ä¿è¯é›†ç¾¤çš„**é«˜å¯ç”¨**ã€‚

ä¸ºå•¥å¿…é¡»è¦ä¸‰ä¸ªå®ä¾‹å‘¢ï¼Ÿæˆ‘ä»¬å…ˆçœ‹çœ‹ä¸¤ä¸ªå“¨å…µä¼šå’‹æ ·ã€‚

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8p9ghsrztj30930773yg.jpg)



masterå®•æœºäº† s1å’Œs2ä¸¤ä¸ªå“¨å…µåªè¦æœ‰ä¸€ä¸ªè®¤ä¸ºä½ å®•æœºäº†å°±åˆ‡æ¢äº†ï¼Œå¹¶ä¸”ä¼šé€‰ä¸¾å‡ºä¸€ä¸ªå“¨å…µå»æ‰§è¡Œæ•…éšœï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ä¹Ÿéœ€è¦å¤§å¤šæ•°å“¨å…µéƒ½æ˜¯è¿è¡Œçš„ã€‚

é‚£è¿™æ ·æœ‰å•¥é—®é¢˜å‘¢ï¼ŸM1å®•æœºäº†ï¼ŒS1æ²¡æŒ‚é‚£å…¶å®æ˜¯OKçš„ï¼Œä½†æ˜¯æ•´ä¸ªæœºå™¨éƒ½æŒ‚äº†å‘¢ï¼Ÿå“¨å…µå°±åªå‰©ä¸‹S2ä¸ªè£¸å±Œäº†ï¼Œæ²¡æœ‰å“¨å…µå»å…è®¸æ•…éšœè½¬ç§»äº†ï¼Œè™½ç„¶å¦å¤–ä¸€ä¸ªæœºå™¨ä¸Šè¿˜æœ‰R1ï¼Œä½†æ˜¯æ•…éšœè½¬ç§»å°±æ˜¯ä¸æ‰§è¡Œã€‚

ç»å…¸çš„å“¨å…µé›†ç¾¤æ˜¯è¿™æ ·çš„ï¼š

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8p9gj3qyaj309309pwei.jpg)

M1æ‰€åœ¨çš„æœºå™¨æŒ‚äº†ï¼Œå“¨å…µè¿˜æœ‰ä¸¤ä¸ªï¼Œä¸¤ä¸ªäººä¸€çœ‹ä»–ä¸æ˜¯æŒ‚äº†å˜›ï¼Œé‚£æˆ‘ä»¬å°±é€‰ä¸¾ä¸€ä¸ªå‡ºæ¥æ‰§è¡Œæ•…éšœè½¬ç§»ä¸å°±å¥½äº†ã€‚

æš–ç”·æˆ‘ï¼Œå°çš„æ€»ç»“ä¸‹å“¨å…µç»„ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼š

- é›†ç¾¤ç›‘æ§ï¼šè´Ÿè´£ç›‘æ§ Redis master å’Œ slave è¿›ç¨‹æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚
- æ¶ˆæ¯é€šçŸ¥ï¼šå¦‚æœæŸä¸ª **Redis** å®ä¾‹æœ‰æ•…éšœï¼Œé‚£ä¹ˆå“¨å…µè´Ÿè´£å‘é€æ¶ˆæ¯ä½œä¸ºæŠ¥è­¦é€šçŸ¥ç»™ç®¡ç†å‘˜ã€‚
- æ•…éšœè½¬ç§»ï¼šå¦‚æœ master node æŒ‚æ‰äº†ï¼Œä¼šè‡ªåŠ¨è½¬ç§»åˆ° slave node ä¸Šã€‚
- é…ç½®ä¸­å¿ƒï¼šå¦‚æœæ•…éšœè½¬ç§»å‘ç”Ÿäº†ï¼Œé€šçŸ¥ client å®¢æˆ·ç«¯æ–°çš„ master åœ°å€ã€‚

### ä¸»ä»

æåˆ°è¿™ä¸ªï¼Œå°±è·Ÿæˆ‘å‰é¢æåˆ°çš„æ•°æ®æŒä¹…åŒ–çš„**RDB**å’Œ**AOF**æœ‰ç€æ¯”å¯†åˆ‡çš„å…³ç³»äº†ã€‚

æˆ‘å…ˆè¯´ä¸‹ä¸ºå•¥è¦ç”¨ä¸»ä»è¿™æ ·çš„æ¶æ„æ¨¡å¼ï¼Œå‰é¢æåˆ°äº†å•æœº**QPS**æ˜¯æœ‰ä¸Šé™çš„ï¼Œè€Œä¸”**Redis**çš„ç‰¹æ€§å°±æ˜¯å¿…é¡»æ”¯æ’‘è¯»é«˜å¹¶å‘çš„ï¼Œé‚£ä½ ä¸€å°æœºå™¨åˆè¯»åˆå†™ï¼Œ**è¿™è°é¡¶å¾—ä½å•Š**ï¼Œä¸å½“äººå•Šï¼ä½†æ˜¯ä½ è®©è¿™ä¸ªmasteræœºå™¨å»å†™ï¼Œæ•°æ®åŒæ­¥ç»™åˆ«çš„slaveæœºå™¨ï¼Œä»–ä»¬éƒ½æ‹¿å»è¯»ï¼Œåˆ†å‘æ‰å¤§é‡çš„è¯·æ±‚é‚£æ˜¯ä¸æ˜¯å¥½å¾ˆå¤šï¼Œè€Œä¸”æ‰©å®¹çš„æ—¶å€™è¿˜å¯ä»¥è½»æ¾å®ç°æ°´å¹³æ‰©å®¹ã€‚

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8p9gedwerj312y0hodhm.jpg)

ä½ å¯åŠ¨ä¸€å°slave çš„æ—¶å€™ï¼Œä»–ä¼šå‘é€ä¸€ä¸ª**psync**å‘½ä»¤ç»™master ï¼Œå¦‚æœæ˜¯è¿™ä¸ªslaveç¬¬ä¸€æ¬¡è¿æ¥åˆ°masterï¼Œä»–ä¼šè§¦å‘ä¸€ä¸ªå…¨é‡å¤åˆ¶ã€‚masterå°±ä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œç”Ÿæˆ**RDB**å¿«ç…§ï¼Œè¿˜ä¼šæŠŠæ–°çš„å†™è¯·æ±‚éƒ½ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œ**RDB**æ–‡ä»¶ç”Ÿæˆåï¼Œmasterä¼šå°†è¿™ä¸ª**RDB**å‘é€ç»™slaveçš„ï¼Œslaveæ‹¿åˆ°ä¹‹ååšçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯å†™è¿›æœ¬åœ°çš„ç£ç›˜ï¼Œç„¶ååŠ è½½è¿›å†…å­˜ï¼Œç„¶åmasterä¼šæŠŠå†…å­˜é‡Œé¢ç¼“å­˜çš„é‚£äº›æ–°å‘½åéƒ½å‘ç»™slaveã€‚

**æˆ‘å‘å‡ºæ¥ä¹‹åæ¥è‡ªCSDNçš„ç½‘å‹ï¼šJian_Shen_Zer é—®äº†ä¸ªé—®é¢˜ï¼š** 

ä¸»ä»åŒæ­¥çš„æ—¶å€™ï¼Œæ–°çš„slaverè¿›æ¥çš„æ—¶å€™ç”¨**RDB**ï¼Œé‚£ä¹‹åçš„æ•°æ®å‘¢ï¼Ÿæœ‰æ–°çš„æ•°æ®è¿›å…¥masteræ€ä¹ˆåŒæ­¥åˆ°slaverå•Š

æ•–ä¸™ç­”ï¼šç¬¨ï¼Œ**AOF**å˜›ï¼Œå¢é‡çš„å°±åƒ**MySQL**çš„**Binlog**ä¸€æ ·ï¼ŒæŠŠæ—¥å¿—å¢é‡åŒæ­¥ç»™ä»æœåŠ¡å°±å¥½äº†

#### key å¤±æ•ˆæœºåˆ¶

**Redis** çš„ key å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸå Redis é‡‡ç”¨ä¸»åŠ¨å’Œè¢«åŠ¨ç»“åˆçš„å¤±æ•ˆæœºåˆ¶ï¼Œä¸€ä¸ªæ˜¯å’Œ MC ä¸€æ ·åœ¨è®¿é—®æ—¶è§¦å‘è¢«åŠ¨åˆ é™¤ï¼Œå¦ä¸€ç§æ˜¯å®šæœŸçš„ä¸»åŠ¨åˆ é™¤ã€‚

å®šæœŸ+æƒ°æ€§+å†…å­˜æ·˜æ±°

### ç¼“å­˜å¸¸è§é—®é¢˜

#### ç¼“å­˜æ›´æ–°æ–¹å¼

è¿™æ˜¯å†³å®šåœ¨ä½¿ç”¨ç¼“å­˜æ—¶å°±è¯¥è€ƒè™‘çš„é—®é¢˜ã€‚ 

ç¼“å­˜çš„æ•°æ®åœ¨æ•°æ®æºå‘ç”Ÿå˜æ›´æ—¶éœ€è¦å¯¹ç¼“å­˜è¿›è¡Œæ›´æ–°ï¼Œæ•°æ®æºå¯èƒ½æ˜¯ DBï¼Œä¹Ÿå¯èƒ½æ˜¯è¿œç¨‹æœåŠ¡ã€‚æ›´æ–°çš„æ–¹å¼å¯ä»¥æ˜¯ä¸»åŠ¨æ›´æ–°ã€‚æ•°æ®æºæ˜¯ DB æ—¶ï¼Œå¯ä»¥åœ¨æ›´æ–°å®Œ DB åå°±ç›´æ¥æ›´æ–°ç¼“å­˜ã€‚

å½“æ•°æ®æºä¸æ˜¯ DB è€Œæ˜¯å…¶ä»–è¿œç¨‹æœåŠ¡ï¼Œå¯èƒ½æ— æ³•åŠæ—¶ä¸»åŠ¨æ„ŸçŸ¥æ•°æ®å˜æ›´ï¼Œè¿™ç§æƒ…å†µä¸‹ä¸€èˆ¬ä¼šé€‰æ‹©å¯¹ç¼“å­˜æ•°æ®è®¾ç½®å¤±æ•ˆæœŸï¼Œä¹Ÿå°±æ˜¯æ•°æ®ä¸ä¸€è‡´çš„æœ€å¤§å®¹å¿æ—¶é—´ã€‚

è¿™ç§åœºæ™¯ä¸‹ï¼Œå¯ä»¥é€‰æ‹©å¤±æ•ˆæ›´æ–°ï¼Œkey ä¸å­˜åœ¨æˆ–å¤±æ•ˆæ—¶å…ˆè¯·æ±‚æ•°æ®æºè·å–æœ€æ–°æ•°æ®ï¼Œç„¶åå†æ¬¡ç¼“å­˜ï¼Œå¹¶æ›´æ–°å¤±æ•ˆæœŸã€‚

 ä½†è¿™æ ·åšæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœä¾èµ–çš„è¿œç¨‹æœåŠ¡åœ¨æ›´æ–°æ—¶å‡ºç°å¼‚å¸¸ï¼Œåˆ™ä¼šå¯¼è‡´æ•°æ®ä¸å¯ç”¨ã€‚æ”¹è¿›çš„åŠæ³•æ˜¯å¼‚æ­¥æ›´æ–°ï¼Œå°±æ˜¯å½“å¤±æ•ˆæ—¶å…ˆä¸æ¸…é™¤æ•°æ®ï¼Œç»§ç»­ä½¿ç”¨æ—§çš„æ•°æ®ï¼Œç„¶åç”±å¼‚æ­¥çº¿ç¨‹å»æ‰§è¡Œæ›´æ–°ä»»åŠ¡ã€‚è¿™æ ·å°±é¿å…äº†å¤±æ•ˆç¬é—´çš„ç©ºçª—æœŸã€‚å¦å¤–è¿˜æœ‰ä¸€ç§çº¯å¼‚æ­¥æ›´æ–°æ–¹å¼ï¼Œå®šæ—¶å¯¹æ•°æ®è¿›è¡Œåˆ†æ‰¹æ›´æ–°ã€‚å®é™…ä½¿ç”¨æ—¶å¯ä»¥æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©æ›´æ–°æ–¹å¼ã€‚

#### æ•°æ®ä¸ä¸€è‡´

ç¬¬äºŒä¸ªé—®é¢˜æ˜¯æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå¯ä»¥è¯´åªè¦ä½¿ç”¨ç¼“å­˜ï¼Œå°±è¦è€ƒè™‘å¦‚ä½•é¢å¯¹è¿™ä¸ªé—®é¢˜ã€‚ç¼“å­˜ä¸ä¸€è‡´äº§ç”Ÿçš„åŸå› ä¸€èˆ¬æ˜¯ä¸»åŠ¨æ›´æ–°å¤±è´¥ï¼Œä¾‹å¦‚æ›´æ–° DB åï¼Œæ›´æ–° **Redis** å› ä¸ºç½‘ç»œåŸå› è¯·æ±‚è¶…æ—¶ï¼›æˆ–è€…æ˜¯å¼‚æ­¥æ›´æ–°å¤±è´¥å¯¼è‡´ã€‚ 

è§£å†³çš„åŠæ³•æ˜¯ï¼Œå¦‚æœæœåŠ¡å¯¹è€—æ—¶ä¸æ˜¯ç‰¹åˆ«æ•æ„Ÿå¯ä»¥å¢åŠ é‡è¯•ï¼›å¦‚æœæœåŠ¡å¯¹è€—æ—¶æ•æ„Ÿå¯ä»¥é€šè¿‡å¼‚æ­¥è¡¥å¿ä»»åŠ¡æ¥å¤„ç†å¤±è´¥çš„æ›´æ–°ï¼Œæˆ–è€…çŸ­æœŸçš„æ•°æ®ä¸ä¸€è‡´ä¸ä¼šå½±å“ä¸šåŠ¡ï¼Œé‚£ä¹ˆåªè¦ä¸‹æ¬¡æ›´æ–°æ—¶å¯ä»¥æˆåŠŸï¼Œèƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§å°±å¯ä»¥ã€‚

#### ç¼“å­˜ç©¿é€

**ç¼“å­˜ç©¿é€**ã€‚äº§ç”Ÿè¿™ä¸ªé—®é¢˜çš„åŸå› å¯èƒ½æ˜¯å¤–éƒ¨çš„æ¶æ„æ”»å‡»ï¼Œä¾‹å¦‚ï¼Œå¯¹ç”¨æˆ·ä¿¡æ¯è¿›è¡Œäº†ç¼“å­˜ï¼Œä½†æ¶æ„æ”»å‡»è€…ä½¿ç”¨ä¸å­˜åœ¨çš„ç”¨æˆ·idé¢‘ç¹è¯·æ±‚æ¥å£ï¼Œå¯¼è‡´æŸ¥è¯¢ç¼“å­˜ä¸å‘½ä¸­ï¼Œç„¶åç©¿é€ DB æŸ¥è¯¢ä¾ç„¶ä¸å‘½ä¸­ã€‚è¿™æ—¶ä¼šæœ‰å¤§é‡è¯·æ±‚ç©¿é€ç¼“å­˜è®¿é—®åˆ° DBã€‚

è§£å†³çš„åŠæ³•å¦‚ä¸‹ã€‚

1. å¯¹ä¸å­˜åœ¨çš„ç”¨æˆ·ï¼Œåœ¨ç¼“å­˜ä¸­ä¿å­˜ä¸€ä¸ªç©ºå¯¹è±¡è¿›è¡Œæ ‡è®°ï¼Œé˜²æ­¢ç›¸åŒ ID å†æ¬¡è®¿é—® DBã€‚ä¸è¿‡æœ‰æ—¶è¿™ä¸ªæ–¹æ³•å¹¶ä¸èƒ½å¾ˆå¥½è§£å†³é—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´ç¼“å­˜ä¸­å­˜å‚¨å¤§é‡æ— ç”¨æ•°æ®ã€‚
2. ä½¿ç”¨ **BloomFilter** è¿‡æ»¤å™¨ï¼ŒBloomFilter çš„ç‰¹ç‚¹æ˜¯å­˜åœ¨æ€§æ£€æµ‹ï¼Œå¦‚æœ BloomFilter ä¸­ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆæ•°æ®ä¸€å®šä¸å­˜åœ¨ï¼›å¦‚æœ BloomFilter ä¸­å­˜åœ¨ï¼Œå®é™…æ•°æ®ä¹Ÿæœ‰å¯èƒ½ä¼šä¸å­˜åœ¨ã€‚éå¸¸é€‚åˆè§£å†³è¿™ç±»çš„é—®é¢˜ã€‚

#### ç¼“å­˜å‡»ç©¿

**ç¼“å­˜å‡»ç©¿**ï¼Œå°±æ˜¯æŸä¸ªçƒ­ç‚¹æ•°æ®å¤±æ•ˆæ—¶ï¼Œå¤§é‡é’ˆå¯¹è¿™ä¸ªæ•°æ®çš„è¯·æ±‚ä¼šç©¿é€åˆ°æ•°æ®æºã€‚

è§£å†³è¿™ä¸ªé—®é¢˜æœ‰å¦‚ä¸‹åŠæ³•ã€‚

1. å¯ä»¥ä½¿ç”¨äº’æ–¥é”æ›´æ–°ï¼Œä¿è¯åŒä¸€ä¸ªè¿›ç¨‹ä¸­é’ˆå¯¹åŒä¸€ä¸ªæ•°æ®ä¸ä¼šå¹¶å‘è¯·æ±‚åˆ° DBï¼Œå‡å° DB å‹åŠ›ã€‚
2. ä½¿ç”¨éšæœºé€€é¿æ–¹å¼ï¼Œå¤±æ•ˆæ—¶éšæœº sleep ä¸€ä¸ªå¾ˆçŸ­çš„æ—¶é—´ï¼Œå†æ¬¡æŸ¥è¯¢ï¼Œå¦‚æœå¤±è´¥å†æ‰§è¡Œæ›´æ–°ã€‚
3. é’ˆå¯¹å¤šä¸ªçƒ­ç‚¹ key åŒæ—¶å¤±æ•ˆçš„é—®é¢˜ï¼Œå¯ä»¥åœ¨ç¼“å­˜æ—¶ä½¿ç”¨å›ºå®šæ—¶é—´åŠ ä¸Šä¸€ä¸ªå°çš„éšæœºæ•°ï¼Œé¿å…å¤§é‡çƒ­ç‚¹ key åŒä¸€æ—¶åˆ»å¤±æ•ˆã€‚

#### ç¼“å­˜é›ªå´©

**ç¼“å­˜é›ªå´©**ï¼Œäº§ç”Ÿçš„åŸå› æ˜¯ç¼“å­˜æŒ‚æ‰ï¼Œè¿™æ—¶æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šç©¿é€åˆ° DBã€‚

è§£å†³æ–¹æ³•ï¼š

1. ä½¿ç”¨å¿«é€Ÿå¤±è´¥çš„ç†”æ–­ç­–ç•¥ï¼Œå‡å°‘ DB ç¬é—´å‹åŠ›ï¼›
2. ä½¿ç”¨ä¸»ä»æ¨¡å¼å’Œé›†ç¾¤æ¨¡å¼æ¥å°½é‡ä¿è¯ç¼“å­˜æœåŠ¡çš„é«˜å¯ç”¨ã€‚

å®é™…åœºæ™¯ä¸­ï¼Œè¿™ä¸¤ç§æ–¹æ³•ä¼šç»“åˆä½¿ç”¨ã€‚

è€æœ‹å‹éƒ½çŸ¥é“ä¸ºå•¥æˆ‘**æ²¡æœ‰å¤§ç¯‡å¹…ä»‹ç»**è¿™ä¸ªå‡ ä¸ªç‚¹äº†å§ï¼Œæˆ‘åœ¨ä¹‹å‰çš„æ–‡ç« å®åœ¨æ˜¯å†™å¾—å¤ªè¯¦ç»†äº†ï¼Œå¿ä¸ä½**ç‚¹èµ**é‚£ç§ï¼Œæˆ‘è¿™é‡Œå°±ä¸åšé‡å¤æ‹·è´äº†ã€‚

- **[ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹ç³»åˆ—-RedisåŸºç¡€](https://juejin.im/post/5db66ed9e51d452a2f15d833)**
- **[ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹ç³»åˆ—-ç¼“å­˜é›ªå´©ã€å‡»ç©¿ã€ç©¿é€](https://juejin.im/post/5dbef8306fb9a0203f6fa3e2)**
- **[ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹ç³»åˆ—-Rediså“¨å…µã€æŒä¹…åŒ–ã€ä¸»ä»ã€æ‰‹æ’•LRU](https://juejin.im/post/5dc3a9fbf265da4d3c072eab)**
- **[ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹ç³»åˆ—-Redisç»ˆç« _å‡›å†¬å°†è‡³ã€FPX_æ–°ç‹ç™»åŸº](https://juejin.im/post/5dc850b4e51d452c2308ee27)**

### è€ƒç‚¹ä¸åŠ åˆ†é¡¹

æ‹¿ç¬”è®°ä¸€ä¸‹ï¼

![](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1573584978404&di=7b060a364b3cc6d6ab876f8892d6f6af&imgtype=jpg&src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190113%2F3ea1a7657be04e2281dd04b2f64a57bd.jpeg)

#### è€ƒç‚¹

é¢è¯•çš„æ—¶å€™é—®ä½ ç¼“å­˜ï¼Œä¸»è¦æ˜¯è€ƒå¯Ÿç¼“å­˜ç‰¹æ€§çš„ç†è§£ï¼Œå¯¹ **MC**ã€**Redis** çš„ç‰¹ç‚¹å’Œä½¿ç”¨æ–¹å¼çš„æŒæ¡ã€‚

- è¦çŸ¥é“ç¼“å­˜çš„ä½¿ç”¨åœºæ™¯ï¼Œä¸åŒç±»å‹ç¼“å­˜çš„ä½¿ç”¨æ–¹å¼ï¼Œä¾‹å¦‚ï¼š

1. - å¯¹ DB çƒ­ç‚¹æ•°æ®è¿›è¡Œç¼“å­˜å‡å°‘ DB å‹åŠ›ï¼›å¯¹ä¾èµ–çš„æœåŠ¡è¿›è¡Œç¼“å­˜ï¼Œæé«˜å¹¶å‘æ€§èƒ½ï¼›

2. - å•çº¯ K-V ç¼“å­˜çš„åœºæ™¯å¯ä»¥ä½¿ç”¨ **MC**ï¼Œè€Œéœ€è¦ç¼“å­˜ listã€set ç­‰ç‰¹æ®Šæ•°æ®æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨ **Redis**ï¼›

3. - éœ€è¦ç¼“å­˜ä¸€ä¸ªç”¨æˆ·æœ€è¿‘æ’­æ”¾è§†é¢‘çš„åˆ—è¡¨å¯ä»¥ä½¿ç”¨ **Redis** çš„ list æ¥ä¿å­˜ã€éœ€è¦è®¡ç®—æ’è¡Œæ¦œæ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ **Redis** çš„ zset ç»“æ„æ¥ä¿å­˜ã€‚

- è¦äº†è§£ MC å’Œ **Redis** çš„å¸¸ç”¨å‘½ä»¤ï¼Œä¾‹å¦‚åŸå­å¢å‡ã€å¯¹ä¸åŒæ•°æ®ç»“æ„è¿›è¡Œæ“ä½œçš„å‘½ä»¤ç­‰ã€‚

- äº†è§£ MC å’Œ **Redis** åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç»“æ„ï¼Œè¿™å¯¹è¯„ä¼°ä½¿ç”¨å®¹é‡ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚

- äº†è§£ MC  å’Œ **Redis** çš„æ•°æ®å¤±æ•ˆæ–¹å¼å’Œå‰”é™¤ç­–ç•¥ï¼Œæ¯”å¦‚ä¸»åŠ¨è§¦å‘çš„å®šæœŸå‰”é™¤å’Œè¢«åŠ¨è§¦å‘å»¶æœŸå‰”é™¤

- è¦ç†è§£ **Redis** çš„æŒä¹…åŒ–ã€ä¸»ä»åŒæ­¥ä¸ **Cluster** éƒ¨ç½²çš„åŸç†ï¼Œæ¯”å¦‚ **RDB** å’Œ **AOF** çš„å®ç°æ–¹å¼ä¸åŒºåˆ«ã€‚

- è¦çŸ¥é“ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©åˆ†åˆ«çš„å¼‚åŒç‚¹ä»¥åŠè§£å†³æ–¹æ¡ˆã€‚

- ä¸ç®¡ä½ æœ‰æ²¡æœ‰ç”µå•†ç»éªŒæˆ‘è§‰å¾—ä½ éƒ½åº”è¯¥çŸ¥é“ç§’æ€çš„å…·ä½“å®ç°ï¼Œä»¥åŠç»†èŠ‚ç‚¹ã€‚

- ........

  æ¬¢è¿å»[GitHub](https://github.com/AobingJava/JavaFamily)è¡¥å……

#### åŠ åˆ†é¡¹

å¦‚æœæƒ³è¦åœ¨é¢è¯•ä¸­è·å¾—æ›´å¥½çš„è¡¨ç°ï¼Œè¿˜åº”äº†è§£ä¸‹é¢è¿™äº›åŠ åˆ†é¡¹ã€‚

- æ˜¯è¦ç»“åˆå®é™…åº”ç”¨åœºæ™¯æ¥ä»‹ç»ç¼“å­˜çš„ä½¿ç”¨ã€‚ä¾‹å¦‚è°ƒç”¨åç«¯æœåŠ¡æ¥å£è·å–ä¿¡æ¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æœ¬åœ°+è¿œç¨‹çš„å¤šçº§ç¼“å­˜ï¼›å¯¹äºåŠ¨æ€æ’è¡Œæ¦œç±»çš„åœºæ™¯å¯ä»¥è€ƒè™‘é€šè¿‡ **Redis** çš„ **Sorted set** æ¥å®ç°ç­‰ç­‰ã€‚

- æœ€å¥½ä½ æœ‰è¿‡åˆ†å¸ƒå¼ç¼“å­˜è®¾è®¡å’Œä½¿ç”¨ç»éªŒï¼Œä¾‹å¦‚é¡¹ç›®ä¸­åœ¨ä»€ä¹ˆåœºæ™¯ä½¿ç”¨è¿‡ **Redis**ï¼Œä½¿ç”¨äº†ä»€ä¹ˆæ•°æ®ç»“æ„ï¼Œè§£å†³å“ªç±»çš„é—®é¢˜ï¼›ä½¿ç”¨ MC æ—¶æ ¹æ®é¢„ä¼°å€¼å¤§å°è°ƒæ•´ **McSlab** åˆ†é…å‚æ•°ç­‰ç­‰ã€‚

- æœ€å¥½å¯ä»¥äº†è§£ç¼“å­˜ä½¿ç”¨ä¸­å¯èƒ½äº§ç”Ÿçš„é—®é¢˜ã€‚æ¯”å¦‚ **Redis** æ˜¯å•çº¿ç¨‹å¤„ç†è¯·æ±‚ï¼Œåº”å°½é‡é¿å…è€—æ—¶è¾ƒé«˜çš„å•ä¸ªè¯·æ±‚ä»»åŠ¡ï¼Œé˜²æ­¢ç›¸äº’å½±å“ï¼›**Redis** æœåŠ¡åº”é¿å…å’Œå…¶ä»– CPU å¯†é›†å‹çš„è¿›ç¨‹éƒ¨ç½²åœ¨åŒä¸€æœºå™¨ï¼›æˆ–è€…ç¦ç”¨ Swap å†…å­˜äº¤æ¢ï¼Œé˜²æ­¢ **Redis** çš„ç¼“å­˜æ•°æ®äº¤æ¢åˆ°ç¡¬ç›˜ä¸Šï¼Œå½±å“æ€§èƒ½ã€‚å†æ¯”å¦‚å‰é¢æåˆ°çš„ MC é’™åŒ–é—®é¢˜ç­‰ç­‰ã€‚

- è¦äº†è§£ **Redis** çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨ **Redis** æ¥å®ç°åˆ†å¸ƒå¼é”ï¼›ä½¿ç”¨ **Bitmap** æ¥å®ç° **BloomFilter**ï¼Œä½¿ç”¨ **HyperLogLog** æ¥è¿›è¡Œ UV ç»Ÿè®¡ç­‰ç­‰ã€‚

- çŸ¥é“ Redis4.0ã€5.0 ä¸­çš„æ–°ç‰¹æ€§ï¼Œä¾‹å¦‚æ”¯æŒå¤šæ’­çš„å¯æŒä¹…åŒ–æ¶ˆæ¯é˜Ÿåˆ— Streamï¼›é€šè¿‡ Module ç³»ç»Ÿæ¥è¿›è¡Œå®šåˆ¶åŠŸèƒ½æ‰©å±•ç­‰ç­‰ã€‚
- ........

è¿˜æ˜¯é‚£å¥è¯æ¬¢è¿å»[GitHub](https://github.com/AobingJava/JavaFamily)è¡¥å……ã€‚

## æ€»ç»“

è¿™æ¬¡æ˜¯å¯¹æˆ‘**Redis**ç³»åˆ—çš„æ€»ç»“ï¼Œè¿™åº”è¯¥æ˜¯**Redis**ç›¸å…³çš„æœ€åä¸€ç¯‡æ–‡ç« äº†ï¼Œå…¶å®å››ç¯‡çœ‹ä¸‹æ¥çš„å°ä¼™ä¼´å¾ˆå¤šéƒ½ä»**ä¸€çŸ¥åŠè§£**åˆ°äº†**ä¸€è„¸æ‡µé€¼**ï¼Œå“ˆå“ˆå¼€ä¸ªç©ç¬‘ã€‚

æˆ‘è§‰å¾—æˆ‘çš„æ–¹å¼åº”è¯¥è¿˜å¥½ï¼Œå¤§éƒ¨åˆ†å°ä¼™ä¼´è¿˜æ˜¯æ¯”è¾ƒèƒ½ç†è§£çš„ï¼Œè¿™ç¯‡ä¹‹åæˆ‘å°±ä¸ä¼šå†™**Redis**ç›¸å…³çš„æ–‡ç« äº†(ç§’æ€çœ‹å¤§å®¶æƒ³çœ‹çš„çƒ­åº¦å§)ï¼Œæœ‰å•¥é—®é¢˜å¯ä»¥å¾®ä¿¡æ‰¾æˆ‘ï¼Œ**ä¸‹ä¸ªç³»åˆ—å†™å•¥**ï¼Ÿ

å¤§å®¶ä¸ç”¨æ€¥ï¼Œä¸‹ä¸ªç³»åˆ—å‰æˆ‘ä¼šå‘ä¸ªæœ‰æ„æ€çš„æ–‡ç« ï¼Œæ˜¯æˆ‘åœ¨å…¬å¸ä»£ç åˆ›æ„å¤§èµ›æ‹¿å¥–çš„æ–‡ç« ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯**æœ‰ç‚¹ä¸œè¥¿**ï¼Œæˆ‘å¿ä¸ä½åˆ†äº«ä¸€ä¸‹ï¼Œé¡ºä¾¿å°±åœ¨é‚£æœŸå‘èµ·**æŠ•ç¥¨**å§å“ˆå“ˆã€‚

æˆ‘çœ‹åˆ°å¾ˆå¤šå°ä¼™ä¼´éƒ½æœ‰è¯„è®ºè¯´æƒ³çœ‹åˆ«çš„ï¼Œå¤§æ¦‚æœé›†äº†ä¸€ä¸‹ï¼Œè¿˜æ²¡ç•™è¨€çš„è¿™æœŸèµ¶ç´§å“Ÿï¼š

#### æ˜é‡‘  

**æ„šè¾›** ï¼šæƒ³çœ‹è®¡ç®—æœºåŸºç¡€ï¼Œç½‘ç»œå’Œæ“ä½œç³»ç»Ÿé‚£äº›ï¼ˆFPXç‰›è„¾ï¼‰

**cherishå›**ï¼šè®²è®²dubboç»å¸¸é‡åˆ°çš„é¢è¯•é¢˜ç›®ï¼Œå¤ªå¤šäººå–œæ¬¢é—®dubboğŸ˜ƒ

**Javaæ¶æ„å…»æˆè®°**ï¼šçœŸçš„å¾ˆé¦™å•Šï¼Œä¸‹ä¸€æœŸè®²Dubbboï¼ˆé‡ç‚¹SPIï¼‰ç„¶åè®²MQå¥½å—

#### CSDN

**å°æ®¿ä¸‹**ï¼šçœ‹å®Œäº†æ‰€æœ‰çš„redisç¯‡ å¸Œæœ›å¯ä»¥å‡ºssm

#### åšå®¢å›­

**ç¨‹ç„¶**ï¼šDubbo Dubbo

#### å¼€æºä¸­å›½

**linshi2019**ï¼šè¿™æœŸæ˜æ˜¾æ˜¯èµ¶å·¥ä¹‹ä½œå•Š   

æ•–ä¸™ï¼šè¿™æ¡æˆ‘å›ä¸€ä¸‹ï¼Œé­ç­–æˆ‘ï¼Œæˆ‘å¾ˆå–œæ¬¢ï¼Œä¸è¿‡è¯´å®è¯è¿˜æ˜¯å¸Œæœ›å¤§å®¶**ç†è§£**ä¸‹ï¼Œæˆ‘åŒåä¸€ç†¬å¤œä¸‰å¤©äº†ï¼Œç°åœ¨ç»™ä½ ä»¬å†™çš„æ—¶å€™ä¹Ÿæ˜¯å€¼ç­å›å®¶2ç‚¹å·¦å³äº†ï¼Œæˆ‘ä¸€å¤©åƒé¥­å·¥ä½œæ—¶é—´è‚¯å®šæ˜¯å›ºå®šçš„ï¼Œæƒ³å†™ç‚¹ä¸œè¥¿å°±åªæœ‰æŒ¤å‡ºç¡è§‰æ—¶é—´äº†ï¼Œè¿™ç§äº§å‡ºè‚¯å®šæ²¡å‘¨æœ«å…¨æƒ…æŠ•å…¥å†™çš„æ¥çš„è´¨é‡é«˜ã€‚

å…¶å®ç¬¬ä¸€æœŸçœ‹è¿‡æ¥çš„å°ä¼™ä¼´åº”è¯¥ä¹ŸçŸ¥é“ï¼Œæˆ‘åœ¨**æ’ç‰ˆ**ï¼Œè¿˜æœ‰å¾ˆå¤š**æ–‡æ¡ˆ**ï¼Œ**é…å›¾**å…¶å®æˆ‘ä¸€ç›´éƒ½æœ‰åœ¨æ”¹è¿›çš„ï¼Œå…‰æ˜¯åè¯é«˜äº®æˆ‘éƒ½è¦å¼„å¾ˆä¹…ï¼Œå› ä¸ºæ€•å¤§å®¶çœ‹å•ä¸€çš„é»‘ç™½è‰²è°ƒæ¯ç‡¥ã€‚

æˆ‘æ˜¯çœŸçš„ç”¨å¿ƒåœ¨æï¼Œè¿˜æ˜¯å¸Œæœ›å¤§å®¶æ”¯æŒä¸‹ç†è§£ä¸‹ã€‚

**çŸ¥ä¹ã€ç®€ä¹¦ã€æ€å¦ã€æ…•è¯¾æ‰‹è®°**æ²¡äººçœ‹ä¸çŸ¥é“ä¸ºå•¥ï¼Œæ‡‚è¡Œçš„è€é“å¯ä»¥è·Ÿæˆ‘è¯´ä¸€ä¸‹ã€‚

æˆ‘åªæƒ³è¯´ä½ ä»¬æƒ³çœ‹çš„è‚¯å®šéƒ½åœ¨æˆ‘å¼€å¤´å’Œ**[GITHub](https://github.com/AobingJava/JavaFamily)**é‚£ä¸ªå›¾é‡Œå§ï¼Œé—®é¢˜ä¸å¤§ï¼Œåé¢éƒ½ä¼šå†™çš„ã€‚

## é¸£è°¢

 æœ€åæ„Ÿè°¢ä¸‹ï¼Œæ–°æµªå¾®åšçš„æŠ€æœ¯ä¸“å®¶å¼ é›·ã€‚

ä»–äº2013å¹´åŠ å…¥**æ–°æµªå¾®åš**ï¼Œä½œä¸ºæ ¸å¿ƒæŠ€æœ¯äººå‘˜å‚ä¸äº†å¾®åšæœåŠ¡åŒ–ã€æ··åˆäº‘ç­‰å¤šä¸ªé‡ç‚¹é¡¹ç›®ï¼Œæ˜¯å¾®åšå¼€æºçš„**RPC**æ¡†æ¶**Motan**çš„æŠ€æœ¯è´Ÿè´£äººï¼ŒåŒæ—¶ä¹Ÿè´Ÿè´£å¾®åšçš„**Service Mesh**æ–¹æ¡ˆçš„ç ”å‘ä¸æ¨å¹¿ï¼Œä¸“æ³¨äºé«˜å¯ç”¨æ¶æ„åŠæœåŠ¡ä¸­é—´ä»¶å¼€å‘æ–¹å‘ã€‚

 ä»–è´Ÿè´£çš„**Motan**æ¡†æ¶æ¯å¤©æ‰¿è½½ç€ä¸‡äº¿çº§åˆ«çš„è¯·æ±‚è°ƒç”¨ï¼Œæ˜¯å¾®åšå¹³å°æœåŠ¡åŒ–çš„åŸºçŸ³ï¼Œæ¯æ¬¡çš„çªå‘çƒ­ç‚¹äº‹ä»¶ã€æ¯æ¬¡çš„æ˜¥æ™šæµé‡é«˜å³°ï¼Œéƒ½ç¦»ä¸å¼€**Motan**æ¡†æ¶çš„æ”¯æ’‘ä¸ä¿éšœã€‚æ­¤å¤–ï¼Œä»–ä¹Ÿå¤šæ¬¡åº”é‚€åœ¨**ArchSummitã€WOTã€GIAC**æŠ€æœ¯å³°ä¼šåšæŠ€æœ¯åˆ†äº«ã€‚

æ„Ÿè°¢ä»–å¯¹æ–‡ç« éƒ¨åˆ†æ–‡æ¡ˆæä¾›çš„æ”¯æŒå’Œæ€è·¯ã€‚

## END

å¥½äº†å„ä½ï¼Œä»¥ä¸Šå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„å…¨éƒ¨å†…å®¹äº†ï¼Œèƒ½çœ‹åˆ°è¿™é‡Œçš„äººå‘€ï¼Œéƒ½æ˜¯**äººæ‰**ã€‚

æˆ‘åé¢ä¼šæ¯å‘¨éƒ½æ›´æ–°å‡ ç¯‡ã€Š**åŠæ‰“é¢è¯•å®˜**ã€‹ç³»åˆ—å’Œ**äº’è”ç½‘å¸¸ç”¨æŠ€æœ¯æ ˆ**ç›¸å…³çš„æ–‡ç« ã€‚å¦‚æœä½ æœ‰ä»€ä¹ˆæƒ³çŸ¥é“çš„ï¼Œä¹Ÿå¯ä»¥ç•™è¨€ç»™æˆ‘ï¼Œæˆ‘ä¸€æœ‰æ—¶é—´å°±ä¼šå†™å‡ºæ¥ï¼Œæˆ‘ä»¬å…±åŒè¿›æ­¥ã€‚

éå¸¸æ„Ÿè°¢**äººæ‰**ä»¬èƒ½çœ‹åˆ°è¿™é‡Œï¼Œå¦‚æœè¿™ä¸ªæ–‡ç« å†™å¾—è¿˜ä¸é”™ï¼Œè§‰å¾—**ã€Œæ•–ä¸™ã€**æˆ‘**æœ‰ç‚¹ä¸œè¥¿**çš„è¯   **æ±‚ç‚¹èµğŸ‘** **æ±‚å…³æ³¨â¤ï¸**  **æ±‚åˆ†äº«ğŸ‘¥** **æ±‚ç•™è¨€ğŸ’¬** å¯¹æš–ç”·æˆ‘æ¥è¯´ **éå¸¸æœ‰ç”¨**ï¼ï¼ï¼

å„ä½çš„æ”¯æŒå’Œè®¤å¯ï¼Œå°±æ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼Œæˆ‘ä»¬ä¸‹ç¯‡æ–‡ç« è§ï¼

æ•–ä¸™ | æ–‡  ã€åŸåˆ›ã€‘ã€è½¬è½½è¯·è”ç³»æœ¬äººã€‘

------

> **ã€ŠåŠæ‰“é¢è¯•å®˜ã€‹**ç³»åˆ—æ¯å‘¨æŒç»­æ›´æ–°ï¼Œå¯ä»¥å…³æ³¨æˆ‘çš„å…¬ä¼—å·[JavaFamily](https://github.com/AobingJava/JavaFamily#%E5%85%AC%E4%BC%97%E5%8F%B7)ç¬¬ä¸€æ—¶é—´é˜…è¯»å’Œå‚¬æ›´ï¼ˆ**å…¬ä¼—å·æ¯”åšå®¢æ—©ä¸€åˆ°ä¸¤å¤©å“Ÿ**ï¼‰ï¼Œ[**GitHub**](https://github.com/AobingJava/JavaFamily)ä¸Šå·²ç»å¼€æº[https://github.com/Java...](https://github.com/AobingJava/JavaFamily)ï¼Œæœ‰é¢è¯•ç‚¹æ€ç»´å¯¼å›¾ï¼Œæ¬¢è¿[**Star**](https://github.com/AobingJava/JavaFamily)å’Œ[**å®Œå–„**](https://github.com/AobingJava/JavaFamily)é‡Œé¢ä¹Ÿæœ‰æˆ‘ä¸ªäººå¾®ä¿¡æœ‰ä»€ä¹ˆé—®é¢˜ä¹Ÿå¯ä»¥ç›´æ¥æ»´æ»´æˆ‘ï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ã€‚

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8p9gftfchj30p00dwjuj.jpg)